-- RSA Business Segment & Process Refinement - Final Alignment
-- Ensures precise alignment with RSA's commercial insurance structure

-- =====================================================
-- RSA LARGE CORPORATES SEGMENT ALIGNMENT
-- =====================================================
-- Complex risks, multinational operations, bespoke solutions

UPDATE use_cases SET 
  business_segment = 'Large Corporates',
  line_of_business = CASE
    WHEN title = 'Unstructured Data Mining' THEN 'Property & Real Estate'
    WHEN title = 'Cyber Risk Assessment AI' THEN 'Professional & Financial'
    WHEN title = 'Cyber Risk Modeling' THEN 'Professional & Financial'
    WHEN title = 'Parametric Insurance Platform' THEN 'Professional & Financial'
    WHEN title = 'Risk Triage System' THEN 'Property & Real Estate'
    WHEN title = 'AI-led Policy Comparison for Complex Products' THEN 'Property & Real Estate'
    WHEN title = 'Real-time Market Pricing Analysis' THEN 'Property & Real Estate'
    ELSE line_of_business
  END,
  geography = CASE
    WHEN title IN ('Cyber Risk Assessment AI', 'Cyber Risk Modeling', 'Parametric Insurance Platform') THEN 'Global Network'
    WHEN title IN ('Unstructured Data Mining', 'Risk Triage System') THEN 'International/Multinational'
    WHEN title IN ('AI-led Policy Comparison for Complex Products', 'Real-time Market Pricing Analysis') THEN 'London Market'
    ELSE geography
  END
WHERE title IN (
  'Unstructured Data Mining', 'Cyber Risk Assessment AI', 'Cyber Risk Modeling',
  'Parametric Insurance Platform', 'Risk Triage System', 
  'AI-led Policy Comparison for Complex Products', 'Real-time Market Pricing Analysis'
);

-- =====================================================
-- RSA MID-MARKET SEGMENT ALIGNMENT  
-- =====================================================
-- Regional businesses, up to Â£50M turnover, flexible solutions

UPDATE use_cases SET 
  business_segment = 'Mid-Market',
  line_of_business = CASE
    WHEN title = 'Subrogation Opportunity Identification' THEN 'Motor & Fleet'
    WHEN title = 'Dynamic Pricing Engine' THEN 'Property & Real Estate'
    WHEN title = 'Custom Policy Generation' THEN 'Property & Real Estate'
    WHEN title = 'Scene Reconstruction AI' THEN 'Motor & Fleet'
    WHEN title = 'Automated Claims Triage' THEN 'Motor & Fleet'
    WHEN title = 'Fraud Detection Engine' THEN 'Professional & Financial'
    WHEN title = 'Broker-Facing Pricing Chatbot' THEN 'Property & Real Estate'
    WHEN title = 'Concierge Assistant Bot' THEN 'Property & Real Estate'
    WHEN title = 'Smart Cross-selling Platform' THEN 'Property & Real Estate'
    WHEN title = 'Product Recommendation Engine' THEN 'Property & Real Estate'
    WHEN title = 'Virtual Customer Assistant' THEN 'Property & Real Estate'
    ELSE line_of_business
  END,
  geography = CASE
    WHEN title IN ('Broker-Facing Pricing Chatbot', 'Fraud Detection Engine') THEN 'UK Regions'
    WHEN title IN ('Subrogation Opportunity Identification', 'Custom Policy Generation', 'Automated Claims Triage') THEN 'UK Domestic'
    WHEN title IN ('Dynamic Pricing Engine', 'Scene Reconstruction AI') THEN 'European Markets'
    WHEN title IN ('Concierge Assistant Bot', 'Smart Cross-selling Platform', 'Product Recommendation Engine', 'Virtual Customer Assistant') THEN 'Global Network'
    ELSE geography
  END
WHERE title IN (
  'Subrogation Opportunity Identification', 'Dynamic Pricing Engine', 'Custom Policy Generation',
  'Scene Reconstruction AI', 'Automated Claims Triage', 'Fraud Detection Engine',
  'Broker-Facing Pricing Chatbot', 'Concierge Assistant Bot', 'Smart Cross-selling Platform',
  'Product Recommendation Engine', 'Virtual Customer Assistant'
);

-- =====================================================
-- RSA SMALL BUSINESSES SEGMENT ALIGNMENT
-- =====================================================
-- SME, online/digital-first approach, packaged products

UPDATE use_cases SET 
  business_segment = 'Small Businesses',
  line_of_business = CASE
    WHEN title = 'Hyper-personalized Small Business Quotes' THEN 'Property & Real Estate'
    WHEN title = 'Hyper-personalized Customer Outreach' THEN 'Property & Real Estate'
    WHEN title = 'Document Processing Automation' THEN 'Marine & Transportation'
    WHEN title = 'Hyper-personalization Engine' THEN 'Property & Real Estate'
    WHEN title = 'AI-based Decisioning Engine' THEN 'Property & Real Estate'
    WHEN title = 'Real-time Binding Platform' THEN 'Property & Real Estate'
    ELSE line_of_business
  END,
  geography = CASE
    WHEN title IN ('Hyper-personalized Small Business Quotes', 'Hyper-personalized Customer Outreach') THEN 'UK Domestic'
    WHEN title IN ('Document Processing Automation', 'Real-time Binding Platform') THEN 'Global Network'
    WHEN title IN ('Hyper-personalization Engine', 'AI-based Decisioning Engine') THEN 'European Markets'
    ELSE geography
  END,
  process = CASE
    WHEN title IN ('Hyper-personalized Small Business Quotes', 'Hyper-personalized Customer Outreach') THEN 'Submission & Quote'
    WHEN title = 'Document Processing Automation' THEN 'Submission & Quote'
    WHEN title IN ('Hyper-personalization Engine', 'AI-based Decisioning Engine') THEN 'Underwriting'
    WHEN title = 'Real-time Binding Platform' THEN 'Policy Administration'
    ELSE process
  END
WHERE title IN (
  'Hyper-personalized Small Business Quotes', 'Hyper-personalized Customer Outreach',
  'Document Processing Automation', 'Hyper-personalization Engine',
  'AI-based Decisioning Engine', 'Real-time Binding Platform'
);

-- =====================================================
-- RSA DELEGATED AUTHORITY SEGMENT ALIGNMENT
-- =====================================================
-- Schemes, partnerships, delegated underwriting authority

UPDATE use_cases SET 
  business_segment = 'Delegated Authority',
  geography = 'UK Domestic',
  process = CASE
    WHEN title = 'Claims Intake Automation for Delegated Products' THEN 'Claims Management'
    WHEN title = 'AI-Generated Product Summaries for Delegated Partners' THEN 'Policy Administration'
    WHEN title = 'AI Audit Assistant for Delegated Management Information' THEN 'Regulatory & Compliance'
    WHEN title = 'Customer Sentiment Analysis' THEN 'Policy Administration'
    ELSE process
  END,
  line_of_business = CASE
    WHEN title = 'Claims Intake Automation for Delegated Products' THEN 'Property & Real Estate'
    WHEN title = 'AI-Generated Product Summaries for Delegated Partners' THEN 'All Lines'
    WHEN title = 'AI Audit Assistant for Delegated Management Information' THEN 'All Lines'
    WHEN title = 'Customer Sentiment Analysis' THEN 'Accident & Health'
    ELSE line_of_business
  END
WHERE title IN (
  'Claims Intake Automation for Delegated Products',
  'AI-Generated Product Summaries for Delegated Partners',
  'AI Audit Assistant for Delegated Management Information',
  'Customer Sentiment Analysis'
);

-- =====================================================
-- RSA PROCESS-SPECIFIC ALIGNMENTS
-- =====================================================

-- Submission & Quote Process (RSA's front-end sales and quotation)
UPDATE use_cases SET 
  process = 'Submission & Quote'
WHERE title IN (
  'Hyper-personalized Small Business Quotes', 'Hyper-personalized Customer Outreach',
  'Document Processing Automation', 'Concierge Assistant Bot', 'Smart Cross-selling Platform',
  'Product Recommendation Engine', 'Broker-Facing Pricing Chatbot', 'Automated Prefilled Forms'
);

-- Underwriting Process (RSA's risk assessment and pricing)
UPDATE use_cases SET 
  process = 'Underwriting'
WHERE title IN (
  'Unstructured Data Mining', 'Dynamic Pricing Engine', 'Cyber Risk Assessment AI',
  'Predictive Risk Scoring', 'Risk Triage System', 'AI-led Policy Comparison for Complex Products',
  'AI-based Decisioning Engine', 'Real-time Market Pricing Analysis', 'Underwriting Decision Explanation Engine',
  'Hyper-personalization Engine'
);

-- Claims Management Process (RSA's end-to-end claims handling)
UPDATE use_cases SET 
  process = 'Claims Management'
WHERE title IN (
  'Subrogation Opportunity Identification', 'FNOL Ingestion Automation', 'Prior Authorization Optimization',
  'Scene Reconstruction AI', 'Claims Intake Automation for Delegated Products', 'Automated Claims Triage',
  'Claims Review Copilot', 'Dynamic Information Collection', 'Auto-generated First Notice of Loss Insights',
  'Voice-to-Claim Narrative NLP Tool'
);

-- Policy Administration Process (RSA's policy lifecycle management)
UPDATE use_cases SET 
  process = 'Policy Administration'
WHERE title IN (
  'Custom Policy Generation', 'Parametric Insurance Platform', 'AI-Generated Product Summaries for Delegated Partners',
  'Customer Sentiment Analysis', 'IVR Replacement System', 'Intelligent Routing System',
  'Real-time Binding Platform', 'Virtual Customer Assistant', 'LLM-powered Query Handling'
);

-- Risk Consulting Process (RSA's value-added advisory services)
UPDATE use_cases SET 
  process = 'Risk Consulting'
WHERE title IN (
  'Cyber Risk Modeling', 'Synthetic Data Generation', 'Lifetime Value Estimation',
  'Customer Behavior Modeling', 'Service Provider Contract Analyzer'
);

-- Regulatory & Compliance Process (RSA's regulatory and fraud management)
UPDATE use_cases SET 
  process = 'Regulatory & Compliance'
WHERE title IN (
  'Fraud Detection Engine', 'Enhanced Fraud Detection with Market Sentiment',
  'AI Audit Assistant for Delegated Management Information', 'Document Discrepancy Detection'
);

-- Financial Management Process (RSA's operational and IT systems)
UPDATE use_cases SET 
  process = 'Financial Management'
WHERE title IN (
  'Automated Testing Harness', 'Legacy Code Migration Assistant', 'Mainframe Modernization AI'
);

-- =====================================================
-- RSA GEOGRAPHIC MARKET REFINEMENT
-- =====================================================

-- London Market (RSA's specialty and complex risks hub)
UPDATE use_cases SET 
  geography = 'London Market'
WHERE business_segment = 'Large Corporates' 
  AND line_of_business IN ('Professional & Financial', 'Marine & Transportation', 'Construction & Engineering')
  AND title IN ('AI-led Policy Comparison for Complex Products', 'Real-time Market Pricing Analysis');

-- UK Regions (RSA's regional commercial business)
UPDATE use_cases SET 
  geography = 'UK Regions'
WHERE business_segment = 'Mid-Market' 
  AND line_of_business IN ('Property & Real Estate', 'Motor & Fleet')
  AND title IN ('Broker-Facing Pricing Chatbot', 'Fraud Detection Engine', 'Automated Claims Triage');

-- Global Network (RSA's 170 territories)
UPDATE use_cases SET 
  geography = 'Global Network'
WHERE business_segment IN ('Large Corporates', 'Small Businesses')
  OR title IN ('Synthetic Data Generation', 'Automated Testing Harness', 'Mainframe Modernization AI');

-- =====================================================
-- FINAL RSA COMMERCIAL ALIGNMENT VERIFICATION
-- =====================================================

-- RSA Commercial Lines Business Distribution
SELECT 
  'RSA Commercial Lines Distribution' as report,
  line_of_business,
  business_segment,
  COUNT(*) as use_case_count
FROM use_cases 
GROUP BY line_of_business, business_segment
ORDER BY line_of_business, business_segment;

-- RSA Process by Segment Analysis
SELECT 
  'RSA Process by Segment' as report,
  business_segment,
  process,
  COUNT(*) as use_case_count
FROM use_cases 
GROUP BY business_segment, process
ORDER BY business_segment, process;

-- RSA Geographic Distribution by Segment
SELECT 
  'RSA Geographic Distribution' as report,
  geography,
  business_segment,
  COUNT(*) as use_case_count
FROM use_cases 
GROUP BY geography, business_segment
ORDER BY geography, business_segment;

-- Sample RSA-Aligned Use Cases by Line of Business
SELECT 
  'RSA Sample by LOB' as report,
  line_of_business,
  title,
  process,
  business_segment,
  geography,
  quadrant
FROM use_cases 
WHERE line_of_business != 'All Lines'
ORDER BY line_of_business, business_segment
LIMIT 25;